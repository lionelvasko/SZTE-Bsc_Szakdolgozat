@page "/settings"
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize]

<div class="d-flex flex-column min-vh-100 bg-dark text-light">
    <div class="container my-4">

        <ul class="nav nav-pills justify-content-center ">
            <li class="nav-item flex-grow-1 text-center">
                <a class="nav-link @GetTabClass(1) py-3" @onclick="() => SetActiveTab(1)" style="font-size: 1.25rem; cursor: pointer; transition: all 0.3s; border-radius: 1.5rem;">
                    @Localizer["user settings"]
                </a>
            </li>
            <li class="nav-item flex-grow-1 text-center">
                <a class="nav-link @GetTabClass(2) py-3" @onclick="() => SetActiveTab(2)" style="font-size: 1.25rem; cursor: pointer; transition: all 0.3s; border-radius: 1.5rem;">
                    @Localizer["Application settings"]
                </a>
            </li>
        </ul>
    </div>

    <!-- Tab content -->
    <div class="flex-grow-1 d-flex align-items-center top-0">
        <div class="container shadow-lg p-5 rounded">
            @if (activeTab == 1)
            {
                <div>
                    <h3 class="text-center text-info mb-4">User Settings</h3>
                    <form>
                        <div class="mb-4">
                            <label for="email" class="form-label fw-bold">@Localizer["Email address"]</label>
                            <input type="email" class="form-control shadow-sm bg-dark text-light border-secondary" id="email" @bind="userModel.Email" />
                        </div>
                        <div class="mb-4">
                                <label for="name" class="form-label fw-bold">@Localizer["Name"]</label>
                            <input type="text" class="form-control shadow-sm bg-dark text-light border-secondary" id="name" @bind="userModel.Name" />
                        </div>
                        <div class="mb-4">
                                <label for="password" class="form-label fw-bold">@Localizer["Password"]</label>
                                    <input type="password" class="form-control shadow-sm bg-dark text-light border-secondary" id="password" @bind="password" placeholder="@Localizer["Enter your password"]" />
                        </div>
                                <button type="submit" class="btn btn-info btn-lg shadow w-100" style="border-radius: 2rem;">@Localizer["Save changes"]</button>
                    </form>
                </div>
            }
            else if (activeTab == 2)
            {
                <div>
                            <h3 class="text-center text-info mb-4">@Localizer["Application Settings"]</h3>
                    <form>
                        <div class="mb-4">
                                <label for="theme" class="form-label fw-bold">@Localizer["Theme"]</label>
                            <select class="form-select shadow-sm bg-dark text-light border-secondary" id="theme" @bind="theme">
                                        <option value="light">@Localizer["Light"]</option>
                                    <option value="dark">@Localizer["Dark"]</option>
                            </select>
                        </div>
                        <div class="mb-4">
                                <label for="language" class="form-label fw-bold">@Localizer["Language"]</label>
                            <select class="form-select shadow-sm bg-dark text-light border-secondary" id="language" @bind="language">
                                    <option value="en">@Localizer["English"]</option>
                                    <option value="hu">@Localizer["Hungarian"]</option>
                                    <option value="de">@Localizer["German"]</option>
                            </select>
                        </div>
                        <div class="form-check mb-4">
                            <input type="checkbox" class="form-check-input shadow-sm bg-dark border-secondary" id="notifications" @bind="notificationsEnabled" />
                            <label class="form-check-label fw-bold" for="notifications">Enable Notifications</label>
                        </div>
                                <button type="submit" class="btn btn-info btn-lg shadow w-100" style="border-radius: 2rem;">@Localizer["Save Changes"]</button>
                    </form>
                </div>
            }
        </div>
    </div>
</div>

@code {
    private int activeTab = 1;
    private string theme = "light";
    private string language = "en";
    private bool notificationsEnabled = true;

    private string password = null;

    private Szakdoga.Models.UserModel userModel = new Szakdoga.Models.UserModel();

    protected override async Task OnInitializedAsync()
    {
        userModel.Email = await getUserInfos.GetEmail();
        userModel.Name = await getUserInfos.GetName();
    }

    private void SetActiveTab(int tabNumber)
    {
        activeTab = tabNumber;
    }

    private string GetTabClass(int tabNumber)
    {
        return activeTab == tabNumber ? "active" : "";
    }

    [Inject] private UserInfoService getUserInfos { get; set; }
    [Inject] private IStringLocalizer<AppResources> Localizer { get; set; }
}
